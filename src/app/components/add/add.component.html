<app-header></app-header>

<div>

  <h1>Scrivi il tuo Articolo</h1>
  <form class="modulo-intero" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="titolo-modulo">
      <mat-form-field appearance="fill">
        <mat-label>Titolo</mat-label>
        <input matInput formControlName="titolo">
      </mat-form-field>
    </div>
    <div class="selettori">
      <mat-form-field appearance="fill">
        <mat-label>Autore</mat-label>
        <mat-select [formControl]="autore" required>
          <mat-option>--</mat-option>
          <mat-option *ngFor="let aut of autori" [value]="aut">
            {{aut}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="categoria.hasError('required')">Categoria obbligatoria. Sceglierne una.</mat-error>

      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Categoria</mat-label>
        <mat-select [formControl]="categoria" required>
          <mat-option>--</mat-option>
          <mat-option *ngFor="let cate of categorie" [value]="cate">
            {{cate}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="categoria.hasError('required')">Autore obbligatorio. Sceglierne uno.</mat-error>

      </mat-form-field>
        <div>
        <label>Url Immagine</label>
        <input  type="file" #inputFile (change)="uploadFile($event,inputFile.value)" >
        </div>

    </div>

    <div class="testo-articolo">
      <app-immagine *ngIf="updPath" [imgPath]="updPath"></app-immagine>
      <mat-form-field appearance="fill">
        <mat-label>Testo Articolo:</mat-label>
        <textarea matInput formControlName="corpo"></textarea>
      </mat-form-field>
    </div>

    <div class="form-action">
      <button mat-fab color="primary" type="submit"[disabled]="!form.valid" >
        <mat-icon>check_circle</mat-icon>
      </button>
    </div>
  </form>

</div>
