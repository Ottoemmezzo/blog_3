<app-header></app-header>


<div class="container">

  <h1>Scrivi il tuo Articolo</h1>
  <app-immagine [h]="768"[l]="1024"[imgPath]="doc.imgUrl"></app-immagine>
  <form class="modulo-intero" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="titolo-modulo">
      <mat-form-field appearance="fill">
        <mat-label>Titolo</mat-label>
        <input matInput formControlName="titolo"><!-- (mousemove)="inTitolo.value=doc.titolo" #inTitolo >-->
      </mat-form-field>
    </div>
    <div class="selettori">
      <mat-form-field appearance="fill">
        <mat-label>Autore</mat-label>
        <mat-select [formControl]="autore" required>
          <mat-option>--</mat-option>
          <mat-option *ngFor="let aut of autori" [value]="aut">
            {{aut}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="categoria.hasError('required')">Categoria obbligatoria. Sceglierne una.</mat-error>

      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Categoria</mat-label>
        <mat-select [formControl]="categoria" required>
          <mat-option>--</mat-option>
          <mat-option *ngFor="let cate of categorie" [value]="cate.nome">
            {{cate.nome}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="categoria.hasError('required')">Autore obbligatorio. Sceglierne uno.</mat-error>

      </mat-form-field>
        <div>
        <label>Url Immagine</label>
        <input  type="file" #inputFile (change)="uploadFile($event,inputFile.value)" >
        </div>

    </div>

    <div class="testo-articolo">
      <app-immagine *ngIf="updPath" [imgPath]="updPath"></app-immagine>
      <mat-form-field id="desc" appearance="fill">
        <mat-label >Descrizione:</mat-label>
        <textarea  matInput formControlName="descrizione" rows="4" cols="50"></textarea>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Testo Articolo:</mat-label>
        <textarea matInput formControlName="corpo"></textarea>
      </mat-form-field>
      <div class="form-action">
        <button mat-fab color="primary" type="submit"[disabled]="!form.valid" >
          <mat-icon>check_circle</mat-icon>
        </button>
      </div>
    </div>


  </form>

</div>

